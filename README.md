# ETF 持股變化分析器

追蹤野村臺灣智慧優選主動式ETF (00980A) 的每日持股變化，透過視覺化圖表協助投資決策。

## 功能特色

- 📊 **多種圖表展示**：折線圖追蹤個股權重和股數變化
- 📋 **靈活表格檢視**：下拉選單或完整表格模式
- 🎯 **異常偵測**：可調整閾值，快速發現持股異常變化
- 💾 **按月分檔儲存**：高效的資料管理和讀取
- 🔄 **增量更新**：避免重複撈取已有資料

## 專案結構

```
etf-holdings-analyzer/
├── data/                      # 資料儲存 (按月分檔CSV)
│   ├── holdings_2025-05.csv
│   ├── holdings_2025-06.csv
│   ├── holdings_2025-07.csv
│   └── holdings_2025-08.csv
├── web/                       # 網頁介面 (待開發)
│   └── assets/               # 靜態資源
├── data_collector.py          # 資料收集腳本 ✅
├── test_collector.py          # 測試腳本
├── count_data.py             # 資料統計腳本
├── requirements.txt           # Python 相依套件
├── DEVELOPMENT_NOTES.md       # 開發筆記
└── README.md                 # 專案說明
```

## 快速開始

### 1. 安裝相依套件
```bash
pip install -r requirements.txt
```

### 2. 收集資料
```bash
# 收集完整資料 (2025-05-02 至今)
python data_collector.py

# 測試單日資料收集
python test_collector.py

# 統計資料筆數
python count_data.py
```

### 3. 開啟網頁 (開發中)
```bash
# 網頁介面正在開發中...
```

## 資料來源

- **API**: `https://www.nomurafunds.com.tw/API/ETFAPI/api/Fund/GetFundAssets`
- **目標ETF**: 00980A (野村臺灣智慧優選主動式ETF)
- **資料範圍**: 2025-05-02 至今
- **資料格式**: CSV，按日期和權重排序

## 資料統計 (截至 2025-08-30)

| 月份 | 記錄數 | 交易日 |
|------|--------|--------|
| 2025-05 | 1,077 | 20 |
| 2025-06 | 1,071 | 21 |
| 2025-07 | 1,216 | 23 |
| 2025-08 | 1,092 | 21 |
| **總計** | **4,456** | **85** |

## 開發進度

### ✅ 第一階段：資料收集 (已完成)
- [x] 專案架構設計
- [x] 資料收集腳本
- [x] 按月分檔儲存
- [x] 雙重排序 (日期 + 權重)
- [x] 工作日篩選
- [x] 錯誤處理和延遲機制

### 🚧 第二階段：基礎網頁架構 (進行中)
- [ ] 建立HTML檔案結構
- [ ] 主頁導航
- [ ] 基礎樣式
- [ ] 表格展示功能

### 📋 第三階段：表格功能 (待開發)
- [ ] 完整表格版本
- [ ] 下拉選單表格版本
- [ ] 表格排序和篩選

### 📊 第四階段：圖表功能 (待開發)
- [ ] 引入圖表函式庫 (Chart.js)
- [ ] 分開圖表版本
- [ ] 雙Y軸圖表版本

### 🎯 第五階段：進階功能 (待開發)
- [ ] 異常偵測和閾值控制項
- [ ] 效能最佳化和使用者體驗

## 注意事項

- API 每次請求間隔 1 秒，避免過度頻繁呼叫
- 只收集工作日資料 (週一至週五)
- 資料按月分檔，便於管理和讀取
- 支援增量更新，避免重複撷取已有資料
- CSV 檔案按日期和權重雙重排序

## 貢獻指南

歡迎提交 Issue 和 Pull Request！

## 授權

MIT License